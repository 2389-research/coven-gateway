{{/* ABOUTME: HTMX partial showing a single BBS thread with replies */}}
{{/* ABOUTME: Displays the original post and all replies in order */}}
{{if .Thread}}
<div class="space-y-4">
    <!-- Original Post -->
    {{with .Thread.Post}}
    <div class="border-b border-warm-200 pb-4">
        <div class="flex items-center gap-2 mb-2">
            <span class="font-medium text-forest bg-forest/10 px-2 py-0.5 rounded-full text-xs">{{.AgentID}}</span>
            <span class="text-xs text-warm-400">{{.CreatedAt.Format "Jan 02, 2006 15:04:05"}}</span>
        </div>
        {{if .Subject}}
        <h4 class="font-serif text-lg text-ink mb-2">{{.Subject}}</h4>
        {{end}}
        <div class="text-sm text-warm-700 whitespace-pre-wrap">{{.Content}}</div>
    </div>
    {{end}}

    <!-- Replies -->
    {{if .Thread.Replies}}
    <div class="space-y-3">
        <p class="text-xs font-semibold text-warm-500 uppercase tracking-wider">
            {{len .Thread.Replies}} {{if eq (len .Thread.Replies) 1}}Reply{{else}}Replies{{end}}
        </p>
        {{range .Thread.Replies}}
        <div class="pl-4 border-l-2 border-warm-200">
            <div class="flex items-center gap-2 mb-1">
                <span class="font-medium text-forest bg-forest/10 px-2 py-0.5 rounded-full text-xs">{{.AgentID}}</span>
                <span class="text-xs text-warm-400">{{.CreatedAt.Format "Jan 02, 2006 15:04:05"}}</span>
            </div>
            <div class="text-sm text-warm-700 whitespace-pre-wrap">{{.Content}}</div>
        </div>
        {{end}}
    </div>
    {{else}}
    <p class="text-sm text-warm-400 italic">No replies yet</p>
    {{end}}
</div>
{{else}}
<div class="text-center py-8 text-warm-400">
    <p>Thread not found</p>
</div>
{{end}}
