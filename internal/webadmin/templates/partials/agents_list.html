{{/* ABOUTME: HTMX partial for connected agents list */}}
{{/* ABOUTME: Professional business card design */}}
<div class="space-y-3">
    {{if .Agents}}
    {{range .Agents}}
    <div class="agent-row flex items-center justify-between p-4 bg-warm-50 border border-warm-200 rounded-lg hover:bg-white hover:shadow-soft transition-all">
        <div class="flex items-center gap-4">
            <div class="relative">
                <div class="w-10 h-10 rounded-lg {{if .Connected}}bg-forest/10{{else}}bg-warm-100{{end}} flex items-center justify-center">
                    <svg class="w-5 h-5 {{if .Connected}}text-forest{{else}}text-warm-400{{end}}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                </div>
                {{if .Connected}}
                <div class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-forest rounded-full border-2 border-white"></div>
                {{end}}
            </div>
            <div>
                <p class="font-medium text-ink">{{.Name}}</p>
                <p class="text-xs text-warm-400 font-mono">{{.ID}}</p>
            </div>
        </div>
        <div class="flex gap-2">
            <a href="/admin/agents/{{.ID}}" class="px-4 py-2 text-sm font-medium bg-warm-100 text-warm-600 border border-warm-200 rounded-lg hover:bg-warm-200 hover:text-warm-700 transition-colors">
                Details
            </a>
            <a href="/?agent={{.ID}}" class="px-4 py-2 text-sm font-medium bg-forest text-white rounded-lg hover:bg-forest-light transition-colors shadow-soft">
                Chat
            </a>
            {{if .Connected}}
            <button hx-post="/admin/agents/{{.ID}}/disconnect" hx-swap="outerHTML" hx-target="closest .agent-row"
                class="px-4 py-2 text-sm font-medium bg-white text-warm-500 border border-warm-200 rounded-lg hover:border-danger hover:text-danger hover:bg-danger/5 transition-colors">
                Disconnect
            </button>
            {{end}}
        </div>
    </div>
    {{end}}
    {{else}}
    <div class="flex flex-col items-center justify-center py-16 text-warm-400">
        <svg class="w-16 h-16 mb-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        <p class="text-sm font-medium">No agents connected</p>
        <p class="text-xs text-warm-300 mt-1">Waiting for agent registration...</p>
    </div>
    {{end}}
</div>
