{{/* ABOUTME: Single thread detail view with message history */}}
{{define "content"}}
<div class="min-h-screen flex flex-col" hx-headers='{"X-CSRF-Token": "{{.CSRFToken}}"}'>
    <!-- Header -->
    <header class="bg-surface border-b border-border flex-shrink-0">
        <div class="max-w-screen-2xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <a href="/admin/threads" class="flex items-center gap-2 text-text-muted hover:text-cyan transition-colors font-mono text-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                    </svg>
                    Back
                </a>
                <div class="h-4 w-px bg-border"></div>
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 border border-cyan/30 bg-panel flex items-center justify-center">
                        <svg class="w-4 h-4 text-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                    </div>
                    <span class="font-mono text-sm font-semibold uppercase tracking-wider">Thread Detail</span>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2 text-text-secondary">
                    <div class="w-2 h-2 rounded-full bg-cyan status-dot"></div>
                    <span class="font-mono text-sm">{{.User.DisplayName}}</span>
                </div>
                <form method="POST" action="/admin/logout" class="inline">
                    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                    <button type="submit" class="font-mono text-xs text-text-muted hover:text-crimson transition-colors uppercase tracking-wider">Logout</button>
                </form>
            </div>
        </div>
    </header>

    <!-- Main content -->
    <main class="flex-1 p-6 overflow-auto grid-bg">
        <div class="max-w-4xl mx-auto space-y-4">
            <!-- Thread info -->
            <div class="bg-panel border border-border p-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div>
                        <p class="font-mono text-[10px] text-text-muted uppercase tracking-widest mb-1">Frontend</p>
                        <p class="font-mono text-sm text-text-primary">{{.Thread.FrontendName}}</p>
                    </div>
                    <div>
                        <p class="font-mono text-[10px] text-text-muted uppercase tracking-widest mb-1">Agent</p>
                        <p class="font-mono text-xs text-text-secondary">{{.Thread.AgentID}}</p>
                    </div>
                    <div>
                        <p class="font-mono text-[10px] text-text-muted uppercase tracking-widest mb-1">Created</p>
                        <p class="font-mono text-sm text-text-primary">{{.Thread.CreatedAt.Format "Jan 02, 2006 15:04"}}</p>
                    </div>
                    <div>
                        <p class="font-mono text-[10px] text-text-muted uppercase tracking-widest mb-1">Updated</p>
                        <p class="font-mono text-sm text-text-primary">{{.Thread.UpdatedAt.Format "Jan 02, 2006 15:04"}}</p>
                    </div>
                </div>
                <div class="mt-3 pt-3 border-t border-border">
                    <p class="font-mono text-[10px] text-text-muted uppercase tracking-widest mb-1">Thread ID</p>
                    <p class="font-mono text-xs text-text-muted">{{.Thread.ID}}</p>
                </div>
            </div>

            <!-- Messages -->
            <div class="bg-panel border border-border">
                <div class="px-4 py-3 border-b border-border flex items-center gap-2">
                    <svg class="w-4 h-4 text-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                    <span class="font-mono text-sm font-semibold uppercase tracking-wider">Messages</span>
                </div>
                <div id="messages-list" class="divide-y divide-border max-h-[600px] overflow-y-auto">
                    {{if .Messages}}
                    {{range .Messages}}
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <span class="font-mono text-xs font-semibold uppercase tracking-wider {{if eq .Sender "user"}}text-cyan{{else if eq .Sender "agent"}}text-amber{{else}}text-text-muted{{end}}">
                                {{.Sender}}
                            </span>
                            <span class="font-mono text-xs text-text-muted">{{.CreatedAt.Format "15:04:05"}}</span>
                        </div>
                        <div class="text-text-primary whitespace-pre-wrap text-sm font-mono">{{.Content}}</div>
                    </div>
                    {{end}}
                {{else}}
                <div class="flex flex-col items-center justify-center py-12 text-text-muted">
                    <svg class="w-12 h-12 mb-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                    <p class="font-mono text-sm">No messages in this thread</p>
                </div>
                {{end}}
                </div>
            </div>
        </div>
    </main>
</div>
{{end}}
