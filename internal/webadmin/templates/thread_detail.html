{{/* ABOUTME: Single thread detail view with message history */}}
{{/* ABOUTME: Professional business design */}}
{{define "content"}}
<div class="min-h-screen flex flex-col" hx-headers='{"X-CSRF-Token": "{{.CSRFToken}}"}'>
    <!-- Header -->
    <header class="bg-white border-b border-warm-200 flex-shrink-0 shadow-soft">
        <div class="max-w-4xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <a href="/admin/threads" class="flex items-center gap-2 text-warm-500 hover:text-forest text-sm font-medium">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                    </svg>
                    Threads
                </a>
                <div class="h-5 w-px bg-warm-200"></div>
                <h1 class="font-serif text-xl text-ink">Thread Detail</h1>
            </div>
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-forest pulse-soft"></div>
                    <span class="text-sm text-warm-700 font-medium">{{.User.DisplayName}}</span>
                </div>
                <form method="POST" action="/admin/logout" class="inline">
                    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                    <button type="submit" class="text-sm text-warm-500 hover:text-danger font-medium">Sign Out</button>
                </form>
            </div>
        </div>
    </header>

    <!-- Main content -->
    <main class="flex-1 p-6 overflow-auto">
        <div class="max-w-4xl mx-auto space-y-6">
            <!-- Thread info -->
            <div class="bg-white rounded-xl border border-warm-200 shadow-card p-6">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div>
                        <p class="text-xs font-semibold text-warm-400 uppercase tracking-wider mb-2">Frontend</p>
                        <p class="text-sm font-medium text-ink">{{.Thread.FrontendName}}</p>
                    </div>
                    <div>
                        <p class="text-xs font-semibold text-warm-400 uppercase tracking-wider mb-2">Agent</p>
                        <p class="text-xs text-warm-500 font-mono">{{.Thread.AgentID}}</p>
                    </div>
                    <div>
                        <p class="text-xs font-semibold text-warm-400 uppercase tracking-wider mb-2">Created</p>
                        <p class="text-sm text-ink">{{.Thread.CreatedAt.Format "Jan 02, 2006 15:04"}}</p>
                    </div>
                    <div>
                        <p class="text-xs font-semibold text-warm-400 uppercase tracking-wider mb-2">Updated</p>
                        <p class="text-sm text-ink">{{.Thread.UpdatedAt.Format "Jan 02, 2006 15:04"}}</p>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-warm-100">
                    <p class="text-xs font-semibold text-warm-400 uppercase tracking-wider mb-2">Thread ID</p>
                    <p class="text-xs text-warm-400 font-mono">{{.Thread.ID}}</p>
                </div>
            </div>

            <!-- Messages -->
            <div class="bg-white rounded-xl border border-warm-200 shadow-card">
                <div class="px-6 py-4 border-b border-warm-100 flex items-center gap-3">
                    <div class="w-8 h-8 rounded-lg bg-info/10 flex items-center justify-center">
                        <svg class="w-4 h-4 text-info" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                        </svg>
                    </div>
                    <h3 class="font-serif text-xl text-ink">Messages</h3>
                </div>
                <div id="messages-list" class="divide-y divide-warm-100 max-h-[600px] overflow-y-auto">
                    {{if .Messages}}
                    {{range .Messages}}
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-semibold uppercase tracking-wider {{if eq .Sender "user"}}text-forest{{else if eq .Sender "agent"}}text-warning{{else}}text-warm-400{{end}}">
                                {{.Sender}}
                            </span>
                            <span class="text-xs text-warm-400">{{.CreatedAt.Format "15:04:05"}}</span>
                        </div>
                        <div class="text-ink whitespace-pre-wrap text-sm">{{.Content}}</div>
                    </div>
                    {{end}}
                {{else}}
                <div class="flex flex-col items-center justify-center py-16 text-warm-400">
                    <svg class="w-16 h-16 mb-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                    <p class="text-sm font-medium">No messages in this thread</p>
                </div>
                {{end}}
                </div>
            </div>
        </div>
    </main>
</div>
{{end}}
